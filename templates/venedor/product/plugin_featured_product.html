{% load staticfiles %}
{% load i18n %}
{% load favit_tags %}
{% load rating_tags %}
{% load thumbnail %}

<div id="{{ featured_product_title|slugify }}" class="latest-items carousel-wrapper">
    <header class="content-title">
        <div class="title-bg">
            <h2 class="title">{% trans featured_product_title %}</h2>
        </div><!-- End .title-bg -->
        <p class="title-desc">{% trans featured_product_description %}</p>
    </header>

    <div class="carousel-controls">
        <div id="{{ featured_product_title|slugify }}-slider-prev" class="carousel-btn carousel-btn-prev {{ featured_product_title|slugify }} latest-items-slider-prev">
        </div><!-- End .carousel-prev -->
        <div id="{{ featured_product_title|slugify }}-slider-next" class="carousel-btn carousel-btn-next carousel-space {{ featured_product_title|slugify }} latest-items-slider-next">
        </div><!-- End .carousel-next -->
    </div><!-- End .carousel-controls -->

    <div id="{{ featured_product_title|slugify }}" class="{{ featured_product_title|slugify }}-slider owl-carousel">
        {% for product in featured_product_list %}
            <div class="item item-hover" itemscope itemtype="https://schema.org/Product">
                <div class="item-image-wrapper">
                    <figure class="item-image-container">
                        <a href="{{ product.get_absolute_url }}" class="container-image-product-thumb">
                            <i class="fa fa-spinner fa-spin fa-2x img-loading"></i>
                            {% if product.images.first %}
                                <img class="item-image lazyOwl" src="{{ product.images.first.image|thumbnail_url:'150' }}" alt="">
                                {% if product.images.all.1 %}
                                    <img class="item-image-hover lazyOwl" src="{{ product.images.all.1.image|thumbnail_url:'150' }}" alt="" >
                                {% else %}
                                    <img class="item-image-hover lazyOwl" src="{% static 'image/product-default.png' %}" alt="">
                                {% endif %}
                            {% else %}
                                <img class="item-image lazyOwl" src="{% static 'image/product-default.png' %}" alt="">
                                <img class="item-image-hover lazyOwl" src="{% static 'image/product-default.png' %}" alt="">
                            {% endif %}
                        </a>
                    </figure>
                    <div itemprop="offers" itemscope="" itemtype="https://schema.org/Offer" class="item-price-container">
                        {% if offert_price %}
                            <!-- HAS OFFERT -->
                            <span class="old-price">$ {{ product.price }}</span>
                            <span class="item-price">$ {{ product.offert_price }}</span>
                        {% else %}
                            <!-- HASNT OFFERT -->
                            <span class="item-price">$ {{ product.price }}</span>
                        {% endif %}
                    </div>
                    {% if offert_price %}
                        <span style="position: absolute;">{% trans "Discount!" %} </span>
                    {% endif %}
                    {% if product.is_new %}
                        <span class="new-rect">{% trans 'New' %}</span>
                    {% endif %}
                </div><!-- End .item-image-wrapper -->
                <div class="item-meta-container">
                    <div class="ratings-container">
                        <div class="ratings">
                            <div class="ratings-result" data-result="{% rating_product product.id %}"></div>
                        </div><!-- End .ratings -->
                        <span class="ratings-amount">
                            {% rating_quantity_vote_product product.id %} {% trans 'Reviews' %}
                        </span>
                    </div><!-- End .rating-container -->
                    <h3 class="item-name"><a href="{{ product.get_absolute_url }}" itemprop="name" title="{{ product }}">{{ product }}</a></h3>
                    <div class="item-action">
                        <a href="{{ product.get_absolute_url }}" class="item-add-btn">
                            <span class="icon-cart-text">{% trans 'Add to Cart' %}</span>
                        </a>
                        <div class="item-action-inner">
                            {% favorite_button product count=False %}
                            {#                            <a href="#" class="icon-button icon-compare">{% trans 'Checkout' %}</a>#}
                        </div><!-- End .item-action-inner -->
                    </div><!-- End .item-action -->
                </div><!-- End .item-meta-container -->
            </div><!-- End .item -->
        {% endfor %}
    </div><!--latest-items-slider -->
</div><!-- End .latest-items -->

{% block footer_scripts %}
    <script>
        $(document).ready(function() {
            var  latestItems = $('.{{ featured_product_title|slugify }}-slider.owl-carousel');
            latestItems.owlCarousel({
                items: 4,
                itemsDesktop : [1199,4],
                itemsDesktopSmall: [979,3],
                itemsTablet: [768,2],
                itemsMobile : [479,1],
                slideSpeed: 400,
                autoPlay: 8000,
                stopOnHover: true,
                lazyLoad : true,
                navigation : false,
                pagination: false,
                responsive: true,
                mouseDrag: true,
                autoHeight : true
            }).data('navigationBtns', ['#{{ featured_product_title|slugify }}-slider-prev', '#{{ featured_product_title|slugify }}-slider-next']);
        });
    </script>
{% endblock %}
